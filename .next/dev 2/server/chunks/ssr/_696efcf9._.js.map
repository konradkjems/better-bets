{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/konradkjems/Desktop/Cursor-Projects/better-bets/src/components/calculator/CalculationHistory.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '@clerk/nextjs';\nimport { Calculation } from '../../lib/mongodb';\n\ninterface CalculationHistoryProps {\n  onLoadCalculation?: (calculation: Calculation) => void;\n}\n\nexport function CalculationHistory({ onLoadCalculation }: CalculationHistoryProps) {\n  const { getToken } = useAuth();\n  const [calculations, setCalculations] = useState<Calculation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [filter, setFilter] = useState<'all' | 'qualifying' | 'bonus'>('all');\n\n  const fetchCalculations = async () => {\n    try {\n      setLoading(true);\n      \n      const token = await getToken();\n      const response = await fetch('/api/calculations/list', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch calculations');\n      }\n\n      const data = await response.json();\n      setCalculations(data.calculations);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to fetch calculations');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteCalculation = async (id: string) => {\n    try {\n      const token = await getToken();\n      const response = await fetch(`/api/calculations/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete calculation');\n      }\n\n      setCalculations(calculations.filter(calc => calc._id !== id));\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete calculation');\n    }\n  };\n\n  useEffect(() => {\n    fetchCalculations();\n  }, []);\n\n  const filteredCalculations = calculations.filter(calc => \n    filter === 'all' || calc.betType === filter\n  );\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('da-DK', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"animate-pulse\">\n              <div className=\"h-6 bg-gray-200 rounded w-1/4 mb-4\"></div>\n              <div className=\"space-y-3\">\n                <div className=\"h-4 bg-gray-200 rounded\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\n                <div className=\"h-4 bg-gray-200 rounded w-4/6\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-white rounded-xl shadow-sm p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Beregningshistorik</h1>\n            <div className=\"flex items-center gap-4\">\n              <select \n                value={filter} \n                onChange={(e) => setFilter(e.target.value as 'all' | 'qualifying' | 'bonus')}\n                className=\"input-field\"\n              >\n                <option value=\"all\">Alle</option>\n                <option value=\"qualifying\">Kvalificerende</option>\n                <option value=\"bonus\">Bonus</option>\n              </select>\n              <button \n                onClick={fetchCalculations}\n                className=\"btn-secondary\"\n              >\n                Opdater\n              </button>\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-red-800\">{error}</p>\n            </div>\n          )}\n\n          {filteredCalculations.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-gray-400 mb-4\">\n                <svg className=\"w-16 h-16 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ingen beregninger fundet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                {filter === 'all' \n                  ? 'Du har endnu ikke gemt nogen beregninger.' \n                  : `Du har endnu ikke gemt nogen ${filter === 'qualifying' ? 'kvalificerende' : 'bonus'} beregninger.`\n                }\n              </p>\n              <a \n                href=\"/calculator\"\n                className=\"btn-primary\"\n              >\n                Start Ny Beregning\n              </a>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredCalculations.map((calculation) => (\n                <div key={calculation._id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-4 mb-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{calculation.customerName}</h3>\n                        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                          calculation.betType === 'qualifying' \n                            ? 'bg-blue-100 text-blue-800' \n                            : 'bg-green-100 text-green-800'\n                        }`}>\n                          {calculation.betType === 'qualifying' ? 'Kvalificerende' : 'Bonus'}\n                        </span>\n                        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                          calculation.results.isArbitrage \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-red-100 text-red-800'\n                        }`}>\n                          {calculation.results.isArbitrage ? 'Arbitrage' : 'Ingen Arbitrage'}\n                        </span>\n                      </div>\n                      <div className=\"text-sm text-gray-600 mb-2\">\n                        <span className=\"font-medium\">{calculation.teamNames.team1}</span> vs <span className=\"font-medium\">{calculation.teamNames.team2}</span>\n                      </div>\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-500\">Total Indsats:</span>\n                          <div className=\"font-semibold\">{calculation.results.totalStake.toFixed(2)} DKK</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Faktisk Omkostning:</span>\n                          <div className=\"font-semibold\">{calculation.results.totalActualCost.toFixed(2)} DKK</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Profit:</span>\n                          <div className={`font-semibold ${calculation.results.profit > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            {calculation.results.profit.toFixed(2)} DKK\n                          </div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-500\">Profit %:</span>\n                          <div className={`font-semibold ${calculation.results.profitPercentage > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                            {calculation.results.profitPercentage.toFixed(2)}%\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-gray-500 mt-2\">\n                        Oprettet: {formatDate(calculation.createdAt.toString())}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2 ml-4\">\n                      {onLoadCalculation && (\n                        <button \n                          onClick={() => onLoadCalculation(calculation)}\n                          className=\"btn-secondary text-sm\"\n                        >\n                          Indl√¶s\n                        </button>\n                      )}\n                      <button \n                        onClick={() => deleteCalculation(calculation._id!)}\n                        className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                      >\n                        Slet\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,mBAAmB,EAAE,iBAAiB,EAA2B;IAC/E,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,6PAAO;IAC5B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAiC;IAErE,MAAM,oBAAoB;QACxB,IAAI;YACF,WAAW;YAEX,MAAM,QAAQ,MAAM;YACpB,MAAM,WAAW,MAAM,MAAM,0BAA0B;gBACrD,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBACpC;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,gBAAgB,KAAK,YAAY;QACnC,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI;YACF,MAAM,QAAQ,MAAM;YACpB,MAAM,WAAW,MAAM,MAAM,CAAC,kBAAkB,EAAE,IAAI,EAAE;gBACtD,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBACpC;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,gBAAgB,aAAa,MAAM,CAAC,CAAA,OAAQ,KAAK,GAAG,KAAK;QAC3D,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,uBAAuB,aAAa,MAAM,CAAC,CAAA,OAC/C,WAAW,SAAS,KAAK,OAAO,KAAK;IAGvC,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC,SAAS;YACtD,MAAM;YACN,OAAO;YACP,KAAK;YACL,MAAM;YACN,QAAQ;QACV;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAO7B;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wCACzC,WAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,8OAAC;gDAAO,OAAM;0DAAa;;;;;;0DAC3B,8OAAC;gDAAO,OAAM;0DAAQ;;;;;;;;;;;;kDAExB,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;oBAMJ,uBACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;oBAIhC,qBAAqB,MAAM,KAAK,kBAC/B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;oCAAoB,MAAK;oCAAO,QAAO;oCAAe,SAAQ;8CAC3E,cAAA,8OAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAa;wCAAG,GAAE;;;;;;;;;;;;;;;;0CAGzE,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAE,WAAU;0CACV,WAAW,QACR,8CACA,CAAC,6BAA6B,EAAE,WAAW,eAAe,mBAAmB,QAAQ,aAAa,CAAC;;;;;;0CAGzG,8OAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;6CAKH,8OAAC;wBAAI,WAAU;kCACZ,qBAAqB,GAAG,CAAC,CAAC,4BACzB,8OAAC;gCAA0B,WAAU;0CACnC,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAG,WAAU;sEAA+B,YAAY,YAAY;;;;;;sEACrE,8OAAC;4DAAK,WAAW,CAAC,oEAAoE,EACpF,YAAY,OAAO,KAAK,eACpB,8BACA,+BACJ;sEACC,YAAY,OAAO,KAAK,eAAe,mBAAmB;;;;;;sEAE7D,8OAAC;4DAAK,WAAW,CAAC,oEAAoE,EACpF,YAAY,OAAO,CAAC,WAAW,GAC3B,gCACA,2BACJ;sEACC,YAAY,OAAO,CAAC,WAAW,GAAG,cAAc;;;;;;;;;;;;8DAGrD,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAK,WAAU;sEAAe,YAAY,SAAS,CAAC,KAAK;;;;;;wDAAQ;sEAAI,8OAAC;4DAAK,WAAU;sEAAe,YAAY,SAAS,CAAC,KAAK;;;;;;;;;;;;8DAElI,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;;8EACC,8OAAC;oEAAK,WAAU;8EAAgB;;;;;;8EAChC,8OAAC;oEAAI,WAAU;;wEAAiB,YAAY,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;sEAE5E,8OAAC;;8EACC,8OAAC;oEAAK,WAAU;8EAAgB;;;;;;8EAChC,8OAAC;oEAAI,WAAU;;wEAAiB,YAAY,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;sEAEjF,8OAAC;;8EACC,8OAAC;oEAAK,WAAU;8EAAgB;;;;;;8EAChC,8OAAC;oEAAI,WAAW,CAAC,cAAc,EAAE,YAAY,OAAO,CAAC,MAAM,GAAG,IAAI,mBAAmB,gBAAgB;;wEAClG,YAAY,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;sEAG3C,8OAAC;;8EACC,8OAAC;oEAAK,WAAU;8EAAgB;;;;;;8EAChC,8OAAC;oEAAI,WAAW,CAAC,cAAc,EAAE,YAAY,OAAO,CAAC,gBAAgB,GAAG,IAAI,mBAAmB,gBAAgB;;wEAC5G,YAAY,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC;wEAAG;;;;;;;;;;;;;;;;;;;8DAIvD,8OAAC;oDAAI,WAAU;;wDAA6B;wDAC/B,WAAW,YAAY,SAAS,CAAC,QAAQ;;;;;;;;;;;;;sDAGxD,8OAAC;4CAAI,WAAU;;gDACZ,mCACC,8OAAC;oDACC,SAAS,IAAM,kBAAkB;oDACjC,WAAU;8DACX;;;;;;8DAIH,8OAAC;oDACC,SAAS,IAAM,kBAAkB,YAAY,GAAG;oDAChD,WAAU;8DACX;;;;;;;;;;;;;;;;;;+BA7DG,YAAY,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EzC","debugId":null}}]
}